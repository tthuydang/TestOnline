<div>
  <%= render "shared/navigation" %>
  <p class="notice"><% notice %></p>
  <p class="alert"><% alert %> </p>
</div>
<div class="container">
  <div class="row" style="padding-top:0%">
    <div class="col-md-2">
    </div>
    <div class="col-md-8">
      <%= render("shared/alert") %>

<div class="container">
  <div class="content">
    <div id="ticket-group">
      <div id="ticket-code">
        <h3><%= @ticket.code %></h3>
      </div>
      <div class="infor-ticket-example-ques-ans">
        <div class="count-question">
          <input type="text" id="total-question" value="<%= @questions.count %>" hidden >
        </div>
        <div class="time-quiz">
          <div class="progress">
            <div id="time-bar-ticket" class="progress-bar" role="progressbar"  aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
        <div class="time-ticket">
          <input type="text" id="time-exam" value="<%= @ticket.max_time.to_s.split[1].slice(0..1).to_i * 60 + @ticket.max_time.to_s.split[1].slice(3..4).to_i%>"hidden >
          <span id="count"></span>
        </div>
      </div>
      <div class="ans-ques-group">
        <% @ques_index = 0 %>
        <%= render partial: "/guest/exam/shared/questions", collection: @questions, as: :quest %>
      </div>
      <div class="pagination-ticket">
        <a id="prev" onclick="plusSlides(-1)">Prev</a>
        <a id="next" onclick="plusSlides(1)">Next</a>
      </div>
      <div style="float: right">
        <%= link_to("Submit", finish_path(ticket_id: @ticket.id), class: "btn btn-sm btn-outline-secondary") %>
      </div>
    </div>
  </div>
</div>
<style>
  .answer-select {
    height: 100%;
    width: 100%
  }
  .infor-ticket-example-ques-ans{
    border: .5px solid Orange;
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    padding: 5px 10px;
    background-color: #FAFAD2;
    border-radius: 4px;
  }
  .infor-ticket-example-ques-ans .count-question{
    flex: 1 0 7%;
  }
  .infor-ticket-example-ques-ans .time-quiz{
    flex-direction: column;
    align-self: center;
    flex: 1 0 80%;
    padding-right: 4px;
  }
  .infor-ticket-example-ques-ans .progress .progress-bar{
    width: 100%;
  }
  .infor-ticket-example-ques-ans .time-ticket{
    padding-left: 4px;
    flex: 1 0 13%;
  }
  
  .mySlides {display: none}
  #next, #prev{
    text-align: center;
    border: .5px solid Orange;
    border-radius: 4px;
    background-color:#FAFAD2 ;
    padding: 5px 10px;
    cursor: pointer;
    font-weight: 500;
    margin-bottom: 20px;
  }
  #next:hover, #prev:hover{
    background: #ffe5ae;
  }
  .fade {
    -webkit-animation-name: fade;
    -webkit-animation-duration: 1000s;
    animation-name: fade;
    animation-duration: 1000s;
  }
  @-webkit-keyframes fade {
    from {opacity: 1}
    to {opacity: 1}
  }
  @keyframes fade {
    from {opacity: 1}
    to {opacity: 1}
  }
  #answers-text{
    padding-left: 10px;
    width: 95%;
  }
  .checkbox ,.border{
    margin: 15px;
    padding-top: 5px;
    padding-left: 15px;
  }
  #questions-text{
    font-size: 20px;
  }
  #questions-group-ques{
    margin-left: 15px;
    margin-right: 15px;
    margin-bottom: 30px;
    font-size: 20px;
  }
  #questions{
    font-size: 20px;
    color: gray;
  }
    #questions-group{
      margin: 15px;
    }
    #ticket-code {
      text-align: center;
      color: gray;
      margin-top: 10px;
      margin-bottom: 10px
    }
    #ticket-group{
      border: .5px solid Orange;
      background-color: #FAFAD2;
      padding: 15px;
      margin-bottom: 30px
    }
    .pagination-ticket{
      display: flex;
      justify-content: space-around;
    }
</style>
<script>
  //Countdown-time-ticket
  var count = document.getElementById('time-exam').value * 1000 * 60 + 2000
  var date = Date.parse(new Date()) + count;
  var width = 100;
  var progressbar = document.getElementById('time-bar-ticket');
  var width_sec = document.getElementById('time-exam').value;
  var interval = setInterval(function() {
    var now = new Date()
    var countdown = date - now;
    var hours = Math.floor((countdown % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((countdown % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((countdown % (1000 * 60)) / 1000);
    // count--;
    if (countdown < 0) {
      clearInterval(interval);
    } else {
      if (hours < 10) { hours = '0' + hours; }
      if (minutes < 10) { minutes = "0" + minutes; }
      if (seconds < 10) { seconds = "0" + seconds; }
      width -= 100 / (60 * width_sec);
      progressbar.style.width = width + "%";
      if (hours == 0 && minutes < 10 && minutes > 5) {
        progressbar.style.background = "#FF6600";
      } else {
        if (hours == 0 && minutes < 5 && minutes > 0) {
          progressbar.style.background = "#FF0000";
        } else {
          if (hours == 0 && minutes == 0 && seconds == 0) {
            progressbar.style.width = "0%";
          }
        }
      }
      document.getElementById('count').innerHTML = hours + ":" + minutes + ":" + seconds;
    }
  }, 1000);

  //Slide-show-ticket
  var slideIndex = 1;
  showSlides(slideIndex);

  function plusSlides(n) {
    showSlides(slideIndex += n);
  }

  function showSlides(n) {
    var i;
    var slides = document.getElementsByClassName("mySlides");

    if (n >= slides.length) {
      document.getElementById('next').style.display = "none";
      // document.getElementById('prev').style.display = "block";
    } else {
      if (n == 1) {
        document.getElementById('prev').style.display = "none";
        // document.getElementById('next').style.display = "block";
      } else {
        document.getElementById('prev').style.display = "block";
        document.getElementById('next').style.display = "block";
      }
    }
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    slides[slideIndex - 1].style.display = "block";
  }
  //progressBar-time-countdown
</script>

    </div>
    <div class="col-md-2"></div>
  </div>
</div>
<div class="container">
  <div class="row" style="padding-top:5%;">
  </div>
</div>
